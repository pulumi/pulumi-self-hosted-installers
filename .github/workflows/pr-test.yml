on:
  pull_request:

name: PR test

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - name: Remove override files
        run: |
          rm *.override.yml
          rm -r **/*.override.yml

      - name:
        run: zip pulumi-ee.zip README.md *.env *.yml ./all-in-one/**/* ./scripts/**/*

#      - name: Login to Docker Hub
#        uses: docker/login-action@v1
#        with:
#          username: ${{ secrets.DOCKERHUB_USERNAME }}
#          password: ${{ secrets.DOCKERHUB_PASSWORD }}
#
#      - name: Run all-in-one
#        env:
#          PULUMI_LICENSE_KEY: ${{ secrets.PULUMI_LICENSE_KEY }}
#        run: ./scripts/run-ee.sh -f ./all-in-one/docker-compose.yml -d
#
#      - name: Verify if services started
#        run: |
#          # Wait for services to start.
#          echo_header "Wait for Services to Start"
#          printf "API Service "
#          until $(curl --output /dev/null --silent https://localhost:8080/api/status); do
#              printf '.'
#              sleep 1
#          done
#          echo ""
#
#          printf "Console Backend "
#          until $(curl --output /dev/null --silent https://localhost:3000/index.html); do
#              printf '.'
#              sleep 1
#          done
#          echo ""


