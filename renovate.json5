{
  // Extend from Pulumi's default renovate config
  extends: ["github>pulumi/renovate-config//default.json5"],
  
  // Auto-merge configuration
  automerge: true,
  automergeType: "pr",
  automergeStrategy: "squash",
  rebaseWhen: "behind-base-branch",  // Auto-rebase when behind main
  platformAutomerge: true,            // Use GitHub's native auto-merge
  prConcurrentLimit: 10,              // Limit concurrent PRs to reduce noise  
  
  // Ignore specific paths
  ignorePaths: [
    "quickstart-docker-compose/all-in-one/*.yml",
  ],
  
  // Package-specific rules
  packageRules: [
    {
      // Auto-merge patch and minor updates for all packages
      matchUpdateTypes: ["patch", "minor"],
      automerge: true,
    },
    {
      // Auto-merge devDependencies
      matchDepTypes: ["devDependencies"],
      automerge: true,
    },
    {
      // Allow only minor and patch updates for MySQL
      matchDatasources: ["docker"],
      matchPackageNames: ["mysql"],
      matchUpdateTypes: ["minor", "patch"],
      enabled: true,
      automerge: true,
    },
    {
      // Disable updates for OpenSearch
      matchDatasources: ["docker"],
      matchPackageNames: [
        "opensearch/opensearch",
        "opensearchproject/opensearch",
      ],
      enabled: false,
    },
    {
      // Disable major updates for jsonschema — it's an indirect dependency
      // pulled in by pulumi/pulumi SDK and pulumi/esc, which still use v5.
      // v6 has breaking API changes; upgrade is blocked until upstream migrates.
      matchPackageNames: ["github.com/santhosh-tekuri/jsonschema/v5"],
      matchUpdateTypes: ["major"],
      enabled: false,
    },
    {
      // Disable major updates for pgavlin/fx — it's an indirect dependency
      // pulled in by pulumi/pulumi SDK and pulumi/esc, which still import the
      // v0/v1 module path. pgavlin/fx/v2 is a separate Go module already in
      // go.mod; upgrade of v0/v1 is blocked until upstream migrates.
      matchPackageNames: ["github.com/pgavlin/fx"],
      matchUpdateTypes: ["major"],
      enabled: false,
    },
  ],
}
