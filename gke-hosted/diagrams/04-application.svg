<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 2022.390625 507" style="max-width: 2022.39px; background-color: white;" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#my-svg .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#my-svg .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#my-svg .edge-thickness-normal{stroke-width:2px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#0b0b0b;stroke:#0b0b0b;}#my-svg .marker.cross{stroke:#0b0b0b;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:rgb(8.5000000002, 5.7500000001, 0);}#my-svg .cluster-label span,#my-svg p{color:rgb(8.5000000002, 5.7500000001, 0);}#my-svg .label text,#my-svg span,#my-svg p{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#my-svg .flowchart-label text{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .node .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .arrowheadPath{fill:#0b0b0b;}#my-svg .edgePath .path{stroke:#0b0b0b;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#0b0b0b;fill:none;}#my-svg .edgeLabel{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#my-svg .edgeLabel rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#my-svg .labelBkg{background-color:rgba(243.9999999999, 220.9999999998, 255, 0.5);}#my-svg .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#my-svg .cluster text{fill:rgb(8.5000000002, 5.7500000001, 0);}#my-svg .cluster span,#my-svg p{color:rgb(8.5000000002, 5.7500000001, 0);}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(220.5882352941, 100%, 98.3333333333%);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#my-svg .pulumi&gt;*{fill:#4d5bd9!important;stroke:#FFFFFF!important;stroke-width:4px!important;color:#FFFFFF!important;}#my-svg .pulumi span{fill:#4d5bd9!important;stroke:#FFFFFF!important;stroke-width:4px!important;color:#FFFFFF!important;}#my-svg .pulumi tspan{fill:#FFFFFF!important;}#my-svg .security&gt;*{fill:#FBBC05!important;stroke:#f7bf2a!important;stroke-width:4px!important;color:#000000!important;}#my-svg .security span{fill:#FBBC05!important;stroke:#f7bf2a!important;stroke-width:4px!important;color:#000000!important;}#my-svg .security tspan{fill:#000000!important;}#my-svg .network&gt;*{fill:#EA4335!important;stroke:#FFFFFF!important;stroke-width:4px!important;color:#FFFFFF!important;}#my-svg .network span{fill:#EA4335!important;stroke:#FFFFFF!important;stroke-width:4px!important;color:#FFFFFF!important;}#my-svg .network tspan{fill:#FFFFFF!important;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="my-svg_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="my-svg_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="my-svg_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="my-svg_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="my-svg_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="my-svg_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g id="SEC" class="cluster default flowchart-label"><rect height="147" width="711.828125" y="0" x="0" ry="0" rx="0" style=""/><g transform="translate(257.484375, 0)" class="cluster-label"><foreignObject height="19" width="196.859375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Security &amp; Configuration</span></div></foreignObject></g></g><g id="APP" class="cluster default flowchart-label"><rect height="491" width="1274.5625" y="0" x="731.828125" ry="0" rx="0" style=""/><g transform="translate(1243.3359375, 0)" class="cluster-label"><foreignObject height="19" width="251.546875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">03-application: Pulumi Services</span></div></foreignObject></g></g><g id="APPS" class="cluster default flowchart-label"><rect height="269" width="679.7421875" y="197" x="751.828125" ry="0" rx="0" style=""/><g transform="translate(990.76953125, 197)" class="cluster-label"><foreignObject height="19" width="201.859375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Kubernetes Deployments</span></div></foreignObject></g></g><g id="INGRESS" class="cluster default flowchart-label"><rect height="294" width="534.8203125" y="25" x="1451.5703125" ry="0" rx="0" style=""/><g transform="translate(1604.75390625, 25)" class="cluster-label"><foreignObject height="19" width="228.453125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">NGINX Ingress Configuration</span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TLS_CERTS LE-INGRESS_RULES" id="L-TLS_CERTS-INGRESS_RULES-0" d="M114.242,122L114.242,126.167C114.242,130.333,114.242,138.667,351.01,147C587.779,155.333,1061.315,163.667,1298.083,172C1534.852,180.333,1534.852,188.667,1542.714,196.617C1550.576,204.567,1566.301,212.134,1574.163,215.918L1582.026,219.702"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-INGRESS_RULES LE-API_SVC" id="L-INGRESS_RULES-API_SVC-0" d="M1592.703,294L1584.728,298.167C1576.753,302.333,1560.802,310.667,1483.848,319C1406.895,327.333,1268.938,335.667,1190.763,343.661C1112.589,351.655,1094.197,359.309,1085.001,363.136L1075.805,366.964"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-INGRESS_RULES LE-CONSOLE_SVC" id="L-INGRESS_RULES-CONSOLE_SVC-0" d="M1773.172,286.179L1794.828,291.649C1816.484,297.12,1859.797,308.06,1777.193,317.697C1694.589,327.333,1486.068,335.667,1381.807,343.117C1277.547,350.567,1277.547,357.133,1277.547,360.417L1277.547,363.7"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-SSL_REDIRECT LE-INGRESS_RULES" id="L-SSL_REDIRECT-INGRESS_RULES-0" d="M1608.133,122L1608.133,126.167C1608.133,130.333,1608.133,138.667,1608.133,147C1608.133,155.333,1608.133,163.667,1608.133,172C1608.133,180.333,1608.133,188.667,1611.203,196.336C1614.274,204.005,1620.415,211.01,1623.485,214.512L1626.556,218.015"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-IP_ALLOWLIST LE-INGRESS_RULES" id="L-IP_ALLOWLIST-INGRESS_RULES-0" d="M1860.453,122L1860.453,126.167C1860.453,130.333,1860.453,138.667,1860.453,147C1860.453,155.333,1860.453,163.667,1860.453,172C1860.453,180.333,1860.453,188.667,1846.751,197.037C1833.048,205.407,1805.644,213.814,1791.941,218.018L1778.239,222.221"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-DB_CREDS LE-API_SVC" id="L-DB_CREDS-API_SVC-0" d="M340.023,122L340.023,126.167C340.023,130.333,340.023,138.667,456.335,147C572.646,155.333,805.268,163.667,921.579,172C1037.891,180.333,1037.891,188.667,1037.891,203C1037.891,217.333,1037.891,237.667,1037.891,258C1037.891,278.333,1037.891,298.667,1037.891,313C1037.891,327.333,1037.891,335.667,1034.82,343.336C1031.75,351.005,1025.609,358.01,1022.538,361.512L1019.468,365.015"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-STORAGE_KEYS LE-API_SVC" id="L-STORAGE_KEYS-API_SVC-0" d="M581.695,122L581.695,126.167C581.695,130.333,581.695,138.667,669.91,147C758.124,155.333,934.552,163.667,1022.766,172C1110.98,180.333,1110.98,188.667,1110.98,203C1110.98,217.333,1110.98,237.667,1110.98,258C1110.98,278.333,1110.98,298.667,1110.98,313C1110.98,327.333,1110.98,335.667,1103.131,343.616C1095.281,351.566,1079.582,359.133,1071.733,362.916L1063.883,366.699"/><path marker-end="url(#my-svg_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-MIGRATION LE-API_SVC" id="L-MIGRATION-API_SVC-0" d="M894.859,294L894.859,298.167C894.859,302.333,894.859,310.667,894.859,319C894.859,327.333,894.859,335.667,900.246,343.503C905.633,351.339,916.408,358.678,921.795,362.347L927.182,366.016"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(114.2421875, 86)" data-id="TLS_CERTS" data-node="true" id="flowchart-TLS_CERTS-6" class="node default security flowchart-label"><rect height="72" width="158.484375" y="-36" x="-79.2421875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-71.7421875, -28.5)" style="" class="label"><rect/><foreignObject height="57" width="143.484375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">TLS Certificates<br />API &amp; Console<br />External Provision</span></div></foreignObject></g></g><g transform="translate(340.0234375, 86)" data-id="DB_CREDS" data-node="true" id="flowchart-DB_CREDS-7" class="node default security flowchart-label"><rect height="72" width="193.078125" y="-36" x="-96.5390625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-89.0390625, -28.5)" style="" class="label"><rect/><foreignObject height="57" width="178.078125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Database Credentials<br />Cloud SQL Connection<br />Private Access</span></div></foreignObject></g></g><g transform="translate(581.6953125, 86)" data-id="STORAGE_KEYS" data-node="true" id="flowchart-STORAGE_KEYS-8" class="node default security flowchart-label"><rect height="72" width="190.265625" y="-36" x="-95.1328125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-87.6328125, -28.5)" style="" class="label"><rect/><foreignObject height="57" width="175.265625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Service Account Keys<br />HMAC Credentials<br />S3-compatible Access</span></div></foreignObject></g></g><g transform="translate(1608.1328125, 86)" data-id="SSL_REDIRECT" data-node="true" id="flowchart-SSL_REDIRECT-3" class="node default network flowchart-label"><rect height="72" width="222.765625" y="-36" x="-111.3828125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-103.8828125, -28.5)" style="" class="label"><rect/><foreignObject height="57" width="207.765625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">SSL Redirect Enforcement<br />Force HTTPS<br />Security Headers</span></div></foreignObject></g></g><g transform="translate(1661.609375, 258)" data-id="INGRESS_RULES" data-node="true" id="flowchart-INGRESS_RULES-4" class="node default network flowchart-label"><rect height="72" width="223.125" y="-36" x="-111.5625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-104.0625, -28.5)" style="" class="label"><rect/><foreignObject height="57" width="208.125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Path-based Routing<br />api.domain + app.domain<br />TLS Termination</span></div></foreignObject></g></g><g transform="translate(1860.453125, 86)" data-id="IP_ALLOWLIST" data-node="true" id="flowchart-IP_ALLOWLIST-5" class="node default security flowchart-label"><rect height="72" width="181.875" y="-36" x="-90.9375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-83.4375, -28.5)" style="" class="label"><rect/><foreignObject height="57" width="166.875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Optional IP Allowlist<br />CIDR-based Access<br />Security Annotations</span></div></foreignObject></g></g><g transform="translate(984.4140625, 405)" data-id="API_SVC" data-node="true" id="flowchart-API_SVC-0" class="node default pulumi flowchart-label"><rect height="72" width="248.21875" y="-36" x="-124.109375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-116.609375, -28.5)" style="" class="label"><rect/><foreignObject height="57" width="233.21875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Pulumi API Service<br />pulumi/service Image<br />2048m CPU, 1024Mi Memory</span></div></foreignObject></g></g><g transform="translate(1277.546875, 405)" data-id="CONSOLE_SVC" data-node="true" id="flowchart-CONSOLE_SVC-1" class="node default pulumi flowchart-label"><rect height="72" width="238.046875" y="-36" x="-119.0234375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-111.5234375, -28.5)" style="" class="label"><rect/><foreignObject height="57" width="223.046875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Pulumi Console Service<br />pulumi/console Image<br />1024m CPU, 512Mi Memory</span></div></foreignObject></g></g><g transform="translate(894.859375, 258)" data-id="MIGRATION" data-node="true" id="flowchart-MIGRATION-2" class="node default pulumi flowchart-label"><rect height="72" width="216.0625" y="-36" x="-108.03125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-100.53125, -28.5)" style="" class="label"><rect/><foreignObject height="57" width="201.0625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Database Migration<br />Init Container<br />pulumi/migrations Image</span></div></foreignObject></g></g></g></g></g></svg>